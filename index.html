<!DOCTYPE html>
<html>
	<head>
		<style type="text/css">
			#bloque{
				margin:auto;
				font-family:calibri;
				font-size:14px;
				width:200px;
				height:200px;
			}
			
			input{
				display:block;
			}

			#container{
				width:800px;
			}
			
		</style>
		<script src="js/jquery-1.8.3.min.js"></script>
		<script src="http://code.highcharts.com/highcharts.js"></script>
		<script src="http://code.highcharts.com/highcharts-more.js"></script>
		<script src="http://code.highcharts.com/modules/exporting.js"></script>
	</head>
	<body>
		<div id="bloque">
		   <form id="search" name="search" action="/cgi-bin/test.py">
				<label for="search">Search:</label>
				<input type="text" name="consulta" id="consulta"/>
				<input type="button" name="buscar" id="buscar" value="buscar"/>
			</form>
		
			
			<div id="gif">
				<img src="images/ajax.gif" style="display:none;"></img>
			</div>
		</div>
		<div id="container"></div>
		<div id="grafico"></div>		
	<body>
	
	<script>
		var journal=[];	
			
  		$(function(){
		
            $("#buscar").click(function(){
				//$('#gif').show(500);
				//$("#search").hide(0);
				var consulta = $("#consulta").val();
		
                $.ajax({
                    type:"POST",
                    url: $("#search").attr("action"),
                    data:"consulta="+consulta,
					//dataType: "json",
                    success:function(data){
						//$('#gif').hide(0);
						//$("#search").show(0);
                        //$("#container").empty();
                        //$("#container").append(dato.title);
						var x=String(data);
						var obj=$.parseJSON(data);
						//alert(obj[1]['journal_url']);
						$("#container").append("<table>");
						for(var key in obj){
							$("#container").append("<tr>");
							$("#container").append("<td>"+obj[key]['journal_url']+"</td>");
							journal[key]=obj[key]['journal_url'];
							alert(journal[key]);
							$("#container").append("</tr>");
						}
						
						$("#container").append("</table>");
						
						$(function () {
							$('#grafico').highcharts({
								chart: {
									type: 'bubble',
									animation: 'false',
									backgroundColor: '#f8f8ff'
								},

								title: {
									text: 'Busca'
								},
						
								/*tooltip:{
									enabled:false
								},*/
								series : [{
									name: (function(){
										var name=[];
										for(var i=0;i<journal.length;i++){
											name.push(journal[i]);
										}
										return name;
									}()),	
									data : (function () {
										var vector=[[2,3,4],[2,5,6],[2,5,6],[2,5,7],[6,5,8],[7,8,6],[1,5,2],[2,5,3],[6,5,6],[8,5,9]];
										var data = [];
										for(var i=0;i<journal.length;i++){
											data.push(vector[i]);
										}  
										return data;
									}())
								}]
							});
						});
                    },
					error: function (xhr, ajaxOptions, thrownError) {
					   alert(xhr.status);
					   alert(xhr.responseText);
					   alert(thrownError);
					}
                });
            });
        });    
          
        
	</script>
</html>