<!DOCTYPE html>
<html>
	<head>
		<style type="text/css">
			#bloque{
				margin:auto;
				font-family:calibri;
				font-size:14px;
				width:200px;
				height:200px;
			}
			
			input{
				display:block;
			}

			#container{
				width:800px;
			}
			#grafico{
				margin:auto;
				width:800px;
				height:800px;
			}
			
		</style>
		<script src="js/jquery-1.8.3.min.js"></script>
		<script src="http://code.highcharts.com/highcharts.js"></script>
		<script src="http://code.highcharts.com/highcharts-more.js"></script>
		<script src="http://code.highcharts.com/modules/exporting.js"></script>
	</head>
	<body>
		<div id="bloque">
		   <form id="search" name="search" action="/cgi-bin/test.py">
				<label for="search">Search:</label>
				<input type="text" name="consulta" id="consulta"/>
				<input type="button" name="buscar" id="buscar" value="buscar"/>
			</form>
			<!--<div id="gif">
				<img src="images/ajax.gif" style="display:none;"></img>
			</div>
			-->
		</div>
		<div id="grafico"></div>		
	<body>
	
	<script>
		var journal=[];	
		var chart1;
  		$(function(){
		
            $("#buscar").click(function(){
				//$('#gif').show(500);
				//$("#search").hide(0);
				var consulta = $("#consulta").val();
		
                $.ajax({
                    type:"POST",
                    url: $("#search").attr("action"),
                    data:"consulta="+consulta,
					//dataType: "json",
                    success:function(data){
						//$('#gif').hide(0);
						//$("#search").show(0);
                        //$("#container").empty();
                        //$("#container").append(dato.title);
						var x=String(data);
						var obj=$.parseJSON(data);
						//alert(obj[1]['journal_url']);
						highchart();
						for(var key in obj){
							journal[key]=obj[key]['journal_url'];
							addSerie(journal[key],Math.floor(Math.random() * 60) + 1,Math.floor(Math.random() * 60) + 1,Math.floor(Math.random() * 60) + 1);	
						}
						char1.redraw();
						
                    },
					error: function (xhr, ajaxOptions, thrownError) {
					   alert(xhr.status);
					   alert(xhr.responseText);
					   alert(thrownError);
					}
                });
            });
        });    
          
     function highchart(){

			chartOptions = {
		      chart: {
		        renderTo: 'grafico',
		        type: 'bubble',
	            zoomType: 'xy'
		        },
		        title: {
		            text: $("#consulta").val()
		        },
		        subtitle: {
		            text: 'Source: Google Scholar'
		        },
		        xAxis: {
		            title: {
		                enabled: true,
		                text: 'Height (cm)'
		            },
		            startOnTick: true,
		            endOnTick: true,
		            showLastLabel: true
		        },
		        legend: {
		            layout: 'vertical',
		            backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF',
		            borderWidth: 2
		        },

		        yAxis: {
		            title: {
		                text: 'Weight (kg)'
		            }
		        },
		       
		        plotOptions: {
		        
		                tooltip: {
		                    headerFormat: '<b>{series.name}</b><br>',
		                    pointFormat: '{point.x} cm, {point.y} kg'
		                }
		            
		        }
		    
		        
		};
	chart1 = new Highcharts.Chart(chartOptions);		

}	

	function addSerie(nombre,x,y,z){

			chart1.addSeries({                        
			     name: nombre,
		         color: 'rgba(223, 83, 83, .5)',
		         data: [[x,y,z]]  
			}, false);
			chart1.redraw();

	}
	</script>
</html>